/**
 * Copyright 2014 Google Inc. All rights reserved.
 *
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file.
 *
 * @fileoverview Description of this file.
 *
 * A polyfill for HTML Canvas features, including
 * Path2D support.
 */
void 0==CanvasRenderingContext2D.prototype.ellipse&&(CanvasRenderingContext2D.prototype.ellipse=function(t,r,n,e,a,o,i,s){this.save(),this.translate(t,r),this.rotate(a),this.scale(n,e),this.arc(0,0,1,o,i,s),this.restore()}),"function"!=typeof Path2D&&!function(){function t(t){if(this.ops_=[],void 0!=t)if("string"==typeof t)try{this.ops_=parser.parse(t)}catch(r){}else{if(!t.hasOwnProperty("ops_"))throw"Error: "+typeof t+"is not a valid argument to Path";this.ops_=t.ops_.slice(0)}}function r(t){return function(){this.ops_.push({type:t,args:Array.prototype.slice.call(arguments,0)})}}parser=function(){function t(t,r){function n(){this.constructor=t}n.prototype=r.prototype,t.prototype=new n}function r(t,r,n,e,a,o){this.message=t,this.expected=r,this.found=n,this.offset=e,this.line=a,this.column=o,this.name="SyntaxError"}function n(t){function n(r){function n(r,n,e){var a,o;for(a=n;e>a;a++)o=t.charAt(a),"\n"===o?(r.seenCR||r.line++,r.column=1,r.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(r.line++,r.column=1,r.seenCR=!0):(r.column++,r.seenCR=!1)}return xr!==r&&(xr>r&&(xr=0,mr={line:1,column:1,seenCR:!1}),n(mr,xr,r),xr=r),mr}function e(t){Pr>_r||(_r>Pr&&(Pr=_r,Rr=[]),Rr.push(t))}function a(e,a,o){function i(t){var r=1;for(t.sort(function(t,r){return t.description<r.description?-1:t.description>r.description?1:0});r<t.length;)t[r-1]===t[r]?t.splice(r,1):r++}function s(t,r){function n(t){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+r(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+r(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+r(t)})}var e,a,o,i=new Array(t.length);for(o=0;o<t.length;o++)i[o]=t[o].description;return e=t.length>1?i.slice(0,-1).join(", ")+" or "+i[t.length-1]:i[0],a=r?'"'+n(r)+'"':"end of input","Expected "+e+" but "+a+" found."}var u=n(o),c=o<t.length?t.charAt(o):null;return null!==a&&i(a),new r(null!==e?e:s(a,c),a,c,o,u.line,u.column)}function o(){var t,r,n,e,a;for(t=_r,r=[],n=B();n!==ft;)r.push(n),n=B();if(r!==ft)if(n=i(),n===ft&&(n=yt),n!==ft){for(e=[],a=B();a!==ft;)e.push(a),a=B();e!==ft?(Ar=t,r=dt(n),t=r):(_r=t,t=gt)}else _r=t,t=gt;else _r=t,t=gt;return t}function i(){var t,r,n,e,a;if(t=_r,r=s(),r!==ft){for(n=_r,e=[],a=B();a!==ft;)e.push(a),a=B();e!==ft?(a=i(),a!==ft?(e=[e,a],n=e):(_r=n,n=gt)):(_r=n,n=gt),n===ft&&(n=yt),n!==ft?(r=[r,n],t=r):(_r=t,t=gt)}else _r=t,t=gt;return t}function s(){var t,r,n,e,a;if(t=_r,r=p(),r!==ft){for(n=_r,e=[],a=B();a!==ft;)e.push(a),a=B();e!==ft?(a=u(),a!==ft?(e=[e,a],n=e):(_r=n,n=gt)):(_r=n,n=gt),n===ft&&(n=yt),n!==ft?(r=[r,n],t=r):(_r=t,t=gt)}else _r=t,t=gt;return t}function u(){var t,r,n,e,a;if(t=_r,r=c(),r!==ft){for(n=_r,e=[],a=B();a!==ft;)e.push(a),a=B();e!==ft?(a=u(),a!==ft?(e=[e,a],n=e):(_r=n,n=gt)):(_r=n,n=gt),n===ft&&(n=yt),n!==ft?(r=[r,n],t=r):(_r=t,t=gt)}else _r=t,t=gt;return t}function c(){var t;return t=f(),t===ft&&(t=h(),t===ft&&(t=g(),t===ft&&(t=d(),t===ft&&(t=C(),t===ft&&(t=x(),t===ft&&(t=R(),t===ft&&(t=D(),t===ft&&(t=b())))))))),t}function p(){var r,n,a,o;if(r=_r,Ct.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=ft,0===Mr&&e(_t)),n!==ft){for(a=[],o=B();o!==ft;)a.push(o),o=B();a!==ft?(o=l(),o!==ft?(Ar=r,n=At(n,o),r=n):(_r=r,r=gt)):(_r=r,r=gt)}else _r=r,r=gt;return r}function l(){var t,r,n,e,a;return t=_r,r=q(),r!==ft?(n=_r,e=z(),e===ft&&(e=yt),e!==ft?(a=v(),a!==ft?(e=[e,a],n=e):(_r=n,n=gt)):(_r=n,n=gt),n===ft&&(n=yt),n!==ft?(Ar=t,r=xt(r,n),t=r):(_r=t,t=gt)):(_r=t,t=gt),t}function f(){var r,n;return r=_r,mt.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=ft,0===Mr&&e(Pt)),n!==ft&&(Ar=r,n=Rt()),r=n}function h(){var r,n,a,o;if(r=_r,Mt.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=ft,0===Mr&&e(wt)),n!==ft){for(a=[],o=B();o!==ft;)a.push(o),o=B();a!==ft?(o=v(),o!==ft?(Ar=r,n=Dt(n,o),r=n):(_r=r,r=gt)):(_r=r,r=gt)}else _r=r,r=gt;return r}function v(){var t,r,n,e,a;return t=_r,r=q(),r!==ft?(n=_r,e=z(),e===ft&&(e=yt),e!==ft?(a=v(),a!==ft?(e=[e,a],n=e):(_r=n,n=gt)):(_r=n,n=gt),n===ft&&(n=yt),n!==ft?(Ar=t,r=xt(r,n),t=r):(_r=t,t=gt)):(_r=t,t=gt),t}function g(){var r,n,a,o;if(r=_r,Tt.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=ft,0===Mr&&e(bt)),n!==ft){for(a=[],o=B();o!==ft;)a.push(o),o=B();a!==ft?(o=y(),o!==ft?(Ar=r,n=Ft(n,o),r=n):(_r=r,r=gt)):(_r=r,r=gt)}else _r=r,r=gt;return r}function y(){var t,r,n,e,a;return t=_r,r=E(),r!==ft?(n=_r,e=z(),e===ft&&(e=yt),e!==ft?(a=y(),a!==ft?(e=[e,a],n=e):(_r=n,n=gt)):(_r=n,n=gt),n===ft&&(n=yt),n!==ft?(Ar=t,r=xt(r,n),t=r):(_r=t,t=gt)):(_r=t,t=gt),t}function d(){var r,n,a,o;if(r=_r,kt.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=ft,0===Mr&&e(qt)),n!==ft){for(a=[],o=B();o!==ft;)a.push(o),o=B();a!==ft?(o=y(),o!==ft?(Ar=r,n=Et(n,o),r=n):(_r=r,r=gt)):(_r=r,r=gt)}else _r=r,r=gt;return r}function C(){var r,n,a,o;if(r=_r,St.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=ft,0===Mr&&e(It)),n!==ft){for(a=[],o=B();o!==ft;)a.push(o),o=B();a!==ft?(o=_(),o!==ft?(Ar=r,n=Ot(n,o),r=n):(_r=r,r=gt)):(_r=r,r=gt)}else _r=r,r=gt;return r}function _(){var t,r,n,e,a;return t=_r,r=A(),r!==ft?(n=_r,e=z(),e===ft&&(e=yt),e!==ft?(a=_(),a!==ft?(e=[e,a],n=e):(_r=n,n=gt)):(_r=n,n=gt),n===ft&&(n=yt),n!==ft?(Ar=t,r=xt(r,n),t=r):(_r=t,t=gt)):(_r=t,t=gt),t}function A(){var t,r,n,e,a,o;return t=_r,r=q(),r!==ft?(n=z(),n===ft&&(n=yt),n!==ft?(e=q(),e!==ft?(a=z(),a===ft&&(a=yt),a!==ft?(o=q(),o!==ft?(Ar=t,r=zt(r,e,o),t=r):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt),t}function x(){var r,n,a,o;if(r=_r,jt.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=ft,0===Mr&&e(Ht)),n!==ft){for(a=[],o=B();o!==ft;)a.push(o),o=B();a!==ft?(o=m(),o!==ft?(Ar=r,n=Qt(n,o),r=n):(_r=r,r=gt)):(_r=r,r=gt)}else _r=r,r=gt;return r}function m(){var t,r,n,e,a;return t=_r,r=P(),r!==ft?(n=_r,e=z(),e===ft&&(e=yt),e!==ft?(a=m(),a!==ft?(e=[e,a],n=e):(_r=n,n=gt)):(_r=n,n=gt),n===ft&&(n=yt),n!==ft?(Ar=t,r=xt(r,n),t=r):(_r=t,t=gt)):(_r=t,t=gt),t}function P(){var t,r,n,e;return t=_r,r=q(),r!==ft?(n=z(),n===ft&&(n=yt),n!==ft?(e=q(),e!==ft?(Ar=t,r=Vt(r,e),t=r):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt),t}function R(){var r,n,a,o;if(r=_r,Lt.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=ft,0===Mr&&e(Zt)),n!==ft){for(a=[],o=B();o!==ft;)a.push(o),o=B();a!==ft?(o=M(),o!==ft?(Ar=r,n=Bt(n,o),r=n):(_r=r,r=gt)):(_r=r,r=gt)}else _r=r,r=gt;return r}function M(){var t,r,n,e,a;return t=_r,r=w(),r!==ft?(n=_r,e=z(),e===ft&&(e=yt),e!==ft?(a=M(),a!==ft?(e=[e,a],n=e):(_r=n,n=gt)):(_r=n,n=gt),n===ft&&(n=yt),n!==ft?(Ar=t,r=xt(r,n),t=r):(_r=t,t=gt)):(_r=t,t=gt),t}function w(){var t,r,n,e;return t=_r,r=q(),r!==ft?(n=z(),n===ft&&(n=yt),n!==ft?(e=q(),e!==ft?(Ar=t,r=Vt(r,e),t=r):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt),t}function D(){var r,n,a,o;if(r=_r,Ut.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=ft,0===Mr&&e(Gt)),n!==ft){for(a=[],o=B();o!==ft;)a.push(o),o=B();a!==ft?(o=T(),o!==ft?(Ar=r,n=Jt(n,o),r=n):(_r=r,r=gt)):(_r=r,r=gt)}else _r=r,r=gt;return r}function T(){var t,r,n,e,a;return t=_r,r=q(),r!==ft?(n=_r,e=z(),e===ft&&(e=yt),e!==ft?(a=T(),a!==ft?(e=[e,a],n=e):(_r=n,n=gt)):(_r=n,n=gt),n===ft&&(n=yt),n!==ft?(Ar=t,r=xt(r,n),t=r):(_r=t,t=gt)):(_r=t,t=gt),t}function b(){var r,n,a,o;if(r=_r,Kt.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=ft,0===Mr&&e(Nt)),n!==ft){for(a=[],o=B();o!==ft;)a.push(o),o=B();a!==ft?(o=F(),o!==ft?(Ar=r,n=Wt(n,o),r=n):(_r=r,r=gt)):(_r=r,r=gt)}else _r=r,r=gt;return r}function F(){var t,r,n,e,a;return t=_r,r=k(),r!==ft?(n=_r,e=z(),e===ft&&(e=yt),e!==ft?(a=F(),a!==ft?(e=[e,a],n=e):(_r=n,n=gt)):(_r=n,n=gt),n===ft&&(n=yt),n!==ft?(Ar=t,r=xt(r,n),t=r):(_r=t,t=gt)):(_r=t,t=gt),t}function k(){var t,r,n,e,a,o,i,s,u,c,p,l;return t=_r,r=S(),r!==ft?(n=z(),n===ft&&(n=yt),n!==ft?(e=S(),e!==ft?(a=z(),a===ft&&(a=yt),a!==ft?(o=I(),o!==ft?(i=z(),i!==ft?(s=O(),s!==ft?(u=z(),u===ft&&(u=yt),u!==ft?(c=O(),c!==ft?(p=z(),p===ft&&(p=yt),p!==ft?(l=q(),l!==ft?(Ar=t,r=Xt(r,e,o,s,c,l),t=r):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt),t}function q(){var t,r,n,e;return t=_r,r=E(),r!==ft?(n=z(),n===ft&&(n=yt),n!==ft?(e=E(),e!==ft?(Ar=t,r=Yt(r,e),t=r):(_r=t,t=gt)):(_r=t,t=gt)):(_r=t,t=gt),t}function E(){var t,r;return t=_r,r=I(),r!==ft&&(Ar=t,r=$t(r)),t=r}function S(){var t;return t=H(),t===ft&&(t=Z()),t}function I(){var t,r,n;return t=_r,r=L(),r===ft&&(r=yt),r!==ft?(n=H(),n!==ft?(r=[r,n],t=r):(_r=t,t=gt)):(_r=t,t=gt),t===ft&&(t=_r,r=L(),r===ft&&(r=yt),r!==ft?(n=Z(),n!==ft?(r=[r,n],t=r):(_r=t,t=gt)):(_r=t,t=gt)),t}function O(){var r;return 48===t.charCodeAt(_r)?(r=tr,_r++):(r=ft,0===Mr&&e(rr)),r===ft&&(49===t.charCodeAt(_r)?(r=nr,_r++):(r=ft,0===Mr&&e(er))),r}function z(){var t,r,n,e,a;if(t=_r,r=[],n=B(),n!==ft)for(;n!==ft;)r.push(n),n=B();else r=gt;if(r!==ft)if(n=j(),n===ft&&(n=yt),n!==ft){for(e=[],a=B();a!==ft;)e.push(a),a=B();e!==ft?(r=[r,n,e],t=r):(_r=t,t=gt)}else _r=t,t=gt;else _r=t,t=gt;if(t===ft)if(t=_r,r=j(),r!==ft){for(n=[],e=B();e!==ft;)n.push(e),e=B();n!==ft?(r=[r,n],t=r):(_r=t,t=gt)}else _r=t,t=gt;return t}function j(){var r;return 44===t.charCodeAt(_r)?(r=ar,_r++):(r=ft,0===Mr&&e(or)),r}function H(){var t,r,n;return t=_r,r=Q(),r!==ft?(n=V(),n===ft&&(n=yt),n!==ft?(r=[r,n],t=r):(_r=t,t=gt)):(_r=t,t=gt),t===ft&&(t=_r,r=Z(),r!==ft?(n=V(),n!==ft?(r=[r,n],t=r):(_r=t,t=gt)):(_r=t,t=gt)),t}function Q(){var r,n,a,o;return r=_r,n=Z(),n===ft&&(n=yt),n!==ft?(46===t.charCodeAt(_r)?(a=ir,_r++):(a=ft,0===Mr&&e(sr)),a!==ft?(o=Z(),o!==ft?(n=[n,a,o],r=n):(_r=r,r=gt)):(_r=r,r=gt)):(_r=r,r=gt),r===ft&&(r=_r,n=Z(),n!==ft?(46===t.charCodeAt(_r)?(a=ir,_r++):(a=ft,0===Mr&&e(sr)),a!==ft?(n=[n,a],r=n):(_r=r,r=gt)):(_r=r,r=gt)),r}function V(){var r,n,a,o;return r=_r,ur.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=ft,0===Mr&&e(cr)),n!==ft?(a=L(),a===ft&&(a=yt),a!==ft?(o=Z(),o!==ft?(n=[n,a,o],r=n):(_r=r,r=gt)):(_r=r,r=gt)):(_r=r,r=gt),r}function L(){var r;return 43===t.charCodeAt(_r)?(r=pr,_r++):(r=ft,0===Mr&&e(lr)),r===ft&&(45===t.charCodeAt(_r)?(r=fr,_r++):(r=ft,0===Mr&&e(hr))),r}function Z(){var r,n,a;if(r=_r,n=[],vr.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=ft,0===Mr&&e(gr)),a!==ft)for(;a!==ft;)n.push(a),vr.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=ft,0===Mr&&e(gr));else n=gt;return n!==ft&&(Ar=r,n=yr(n)),r=n}function B(){var r;return dr.test(t.charAt(_r))?(r=t.charAt(_r),_r++):(r=ft,0===Mr&&e(Cr)),r}function U(t){for(var r=[],n=0;n<t.length;n++)t[n]instanceof Array?r.push.apply(r,U(t[n])):r.push(t[n]);return r}function G(t,r){return-1==="mlazhvcsqt".indexOf(t)?wr=r:(wr[0]+=r[0],wr[1]+=r[1]),Fr=t,wr.slice(0)}function J(t,r){for(var n=[],e=wr.slice(0),a=0;a<r.length;a+=2){wr=e.slice(0);var o=G(t,r.slice(a,a+2));n=n.concat(o),a==r.length-4&&(Dr=o.slice(0))}return n}function K(){-1=="CcSsQqTt".indexOf(Fr)&&(Dr=wr.slice(0));var t=[0,0];return t[0]=2*wr[0]-Dr[0],t[1]=2*wr[1]-Dr[1],t}function N(t,r){var n=[r,0];return"H"==t&&(n[1]=wr[1]),G(t,n)}function W(t,r){var n=[0,r];return"V"==t&&(n[0]=wr[0]),G(t,n)}function X(t,r){var n=[t];if(r&&r.length>1)for(var e=r[1],a=0;a<e.length;a++)n.push(e[a]);return n}function Y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function $(t,r){return t[0]*r[0]+t[1]*r[1]}function tt(t,r){return $(t,r)/(Y(t)*Y(r))}function rt(t,r){var n=1;return t[0]*r[1]-t[1]*r[0]<0&&(n=-1),n*Math.acos(tt(t,r))}function nt(t,r){var n=Math.cos(r),e=Math.sin(r);return[n*t[0]+e*t[1],-1*e*t[0]+n*t[1]]}function et(t,r){var n=Math.cos(r),e=Math.sin(r);return[n*t[0]-e*t[1],e*t[0]+n*t[1]]}function at(t,r){return[(t[0]-r[0])/2,(t[1]-r[1])/2]}function ot(t,r){return[(t[0]+r[0])/2,(t[1]+r[1])/2]}function it(t,r){return[t[0]*r[0],t[1]*r[1]]}function st(t,r){return[t*r[0],t*r[1]]}function ut(t,r){return[t[0]+r[0],t[1]+r[1]]}function ct(t,r,n,e,a,o,i){if(0==r||0==n)return void Tr.push({type:"lineTo",args:i});var e=e*(Math.PI/180);r=Math.abs(r),n=Math.abs(n);var s=nt(at(t,i),e),u=it(s,s),c=Math.pow(r,2),p=Math.pow(n,2),l=Math.sqrt(u[0]/c+u[1]/p);l>1&&(r*=l,n*=l,c=Math.pow(r,2),p=Math.pow(n,2));var f=Math.sqrt((c*p-c*u[1]-p*u[0])/(c*u[1]+p*u[0]));a==o&&(f*=-1);var h=st(f,[r*s[1]/n,-n*s[0]/r]),v=ut(et(h,e),ot(t,i)),g=[(s[0]-h[0])/r,(s[1]-h[1])/n],y=[(-1*s[0]-h[0])/r,(-1*s[1]-h[1])/n],d=rt([1,0],g),C=rt(g,y),_=d,A=d+C;Tr.push({type:"save",args:[]},{type:"translate",args:[v[0],v[1]]},{type:"rotate",args:[e]},{type:"scale",args:[r,n]},{type:"arc",args:[0,0,1,_,A,1-o]},{type:"restore",args:[]})}var pt,lt=arguments.length>1?arguments[1]:{},ft={},ht={svg_path:o},vt=o,gt=ft,yt=null,dt=function(t){return Tr},Ct=/^[Mm]/,_t={type:"class",value:"[Mm]",description:"[Mm]"},At=function(t,r){var n=t;br&&(n="M",br=!1),Tr.push({type:"moveTo",args:G(n,r[0])});for(var e=1;e<r.length;e++)Tr.push({type:"lineTo",args:G(t,r[e])})},xt=function(t,r){return X(t,r)},mt=/^[Zz]/,Pt={type:"class",value:"[Zz]",description:"[Zz]"},Rt=function(){Tr.push({type:"closePath",args:[]})},Mt=/^[Ll]/,wt={type:"class",value:"[Ll]",description:"[Ll]"},Dt=function(t,r){for(var n=0;n<r.length;n++)Tr.push({type:"lineTo",args:G(t,r[n])})},Tt=/^[Hh]/,bt={type:"class",value:"[Hh]",description:"[Hh]"},Ft=function(t,r){for(var n=0;n<r.length;n++)Tr.push({type:"lineTo",args:N(t,r[n])})},kt=/^[Vv]/,qt={type:"class",value:"[Vv]",description:"[Vv]"},Et=function(t,r){for(var n=0;n<r.length;n++)Tr.push({type:"lineTo",args:W(t,r[n])})},St=/^[Cc]/,It={type:"class",value:"[Cc]",description:"[Cc]"},Ot=function(t,r){for(var n=0;n<r.length;n++)Tr.push({type:"bezierCurveTo",args:J(t,r[n])})},zt=function(t,r,n){return t.concat(r,n)},jt=/^[Ss]/,Ht={type:"class",value:"[Ss]",description:"[Ss]"},Qt=function(t,r){for(var n=0;n<r.length;n++)Tr.push({type:"bezierCurveTo",args:K().concat(J(t,r[n]))})},Vt=function(t,r){return t.concat(r)},Lt=/^[Qq]/,Zt={type:"class",value:"[Qq]",description:"[Qq]"},Bt=function(t,r){for(var n=0;n<r.length;n++)Tr.push({type:"quadraticCurveTo",args:J(t,r[n])})},Ut=/^[Tt]/,Gt={type:"class",value:"[Tt]",description:"[Tt]"},Jt=function(t,r){for(var n=0;n<r.length;n++){var e=K();Tr.push({type:"quadraticCurveTo",args:e.concat(J(t,r[n]))}),Dr=e.slice(0)}},Kt=/^[Aa]/,Nt={type:"class",value:"[Aa]",description:"[Aa]"},Wt=function(t,r){for(var n=0;n<r.length;n++){var e=[wr.slice()],a=[G(t,r[n].slice(-2))];absArgs=e.concat(r[n].slice(0,-2),a),ct.apply(this,absArgs)}},Xt=function(t,r,n,e,a,o){return[parseFloat(t),parseFloat(r),parseFloat(U(n).join("")),parseInt(e),parseInt(a),o[0],o[1]]},Yt=function(t,r){return[t,r]},$t=function(t){return parseFloat(U(t).join(""))},tr="0",rr={type:"literal",value:"0",description:'"0"'},nr="1",er={type:"literal",value:"1",description:'"1"'},ar=",",or={type:"literal",value:",",description:'","'},ir=".",sr={type:"literal",value:".",description:'"."'},ur=/^[eE]/,cr={type:"class",value:"[eE]",description:"[eE]"},pr="+",lr={type:"literal",value:"+",description:'"+"'},fr="-",hr={type:"literal",value:"-",description:'"-"'},vr=/^[0-9]/,gr={type:"class",value:"[0-9]",description:"[0-9]"},yr=function(t){return t.join("")},dr=/^[ \t\n\r]/,Cr={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},_r=0,Ar=0,xr=0,mr={line:1,column:1,seenCR:!1},Pr=0,Rr=[],Mr=0;if("startRule"in lt){if(!(lt.startRule in ht))throw new Error("Can't start parsing from rule \""+lt.startRule+'".');vt=ht[lt.startRule]}var wr=[0,0],Dr=[0,0],Tr=[],br=!0,Fr="";if(pt=vt(),pt!==ft&&_r===t.length)return pt;throw pt!==ft&&_r<t.length&&e({type:"end",description:"end of input"}),a(null,Rr,Pr)}return t(r,Error),{SyntaxError:r,parse:n}}();for(var n=["closePath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","rect","arc","arcTo","ellipse","isPointInPath","isPointInStroke"],e=0;e<n.length;e++){var a=n[e];t.prototype[a]=r(a)}t.prototype.addPath=function(t,r){var n=!1;r&&r.hasOwnProperty("a")&&r.hasOwnProperty("b")&&r.hasOwnProperty("c")&&r.hasOwnProperty("d")&&r.hasOwnProperty("e")&&r.hasOwnProperty("f")&&(n=!0,this.ops_.push({type:"save",args:[]}),this.ops_.push({type:"transform",args:[r.a,r.b,r.c,r.d,r.e,r.f]})),this.ops_=this.ops_.concat(t.ops_),n&&this.ops_.push({type:"restore",args:[]})},original_fill=CanvasRenderingContext2D.prototype.fill,original_stroke=CanvasRenderingContext2D.prototype.stroke,original_clip=CanvasRenderingContext2D.prototype.clip,original_is_point_in_path=CanvasRenderingContext2D.prototype.isPointInPath,original_is_point_in_stroke=CanvasRenderingContext2D.prototype.isPointInStroke,CanvasRenderingContext2D.prototype.fill=function(r){if(r instanceof t){this.beginPath();for(var n=0,e=r.ops_.length;e>n;n++){var a=r.ops_[n];CanvasRenderingContext2D.prototype[a.type].apply(this,a.args)}original_fill.apply(this,Array.prototype.slice.call(arguments,1))}else original_fill.apply(this,arguments)},CanvasRenderingContext2D.prototype.stroke=function(r){if(r instanceof t){this.beginPath();for(var n=0,e=r.ops_.length;e>n;n++){var a=r.ops_[n];CanvasRenderingContext2D.prototype[a.type].apply(this,a.args)}original_stroke.call(this)}else original_stroke.call(this)},CanvasRenderingContext2D.prototype.clip=function(r){if(r instanceof t){this.beginPath();for(var n=0,e=r.ops_.length;e>n;n++){var a=r.ops_[n];CanvasRenderingContext2D.prototype[a.type].apply(this,a.args)}original_clip.apply(this,Array.prototype.slice.call(arguments,1))}else original_clip.apply(this,arguments)},CanvasRenderingContext2D.prototype.isPointInPath=function(r){if(r instanceof t){this.beginPath();for(var n=0,e=r.ops_.length;e>n;n++){var a=r.ops_[n];CanvasRenderingContext2D.prototype[a.type].apply(this,a.args)}return original_is_point_in_path.apply(this,Array.prototype.slice.call(arguments,1))}return original_is_point_in_path.apply(this,arguments)},CanvasRenderingContext2D.prototype.isPointInStroke=function(r){if(r instanceof t){this.beginPath();for(var n=0,e=r.ops_.length;e>n;n++){var a=r.ops_[n];CanvasRenderingContext2D.prototype[a.type].apply(this,a.args)}return original_is_point_in_stroke.apply(this,Array.prototype.slice.call(arguments,1))}return original_is_point_in_stroke.apply(this,arguments)},Path2D=t}();
